!function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var n={};r.m=e,r.c=n,r.i=function(e){return e},r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=15)}([function(e,r){e.exports=require("memoized-class-decorator")},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Serial=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},l=r.Serial=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM serials WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forTitle",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM serials WHERE title = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM serials ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()},o):[])})})}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.season_id&&(n.seasonID=r.season_id),r.story&&(n.story=r.story),r.serial&&(n.serial=r.serial),r.title&&(n.title=r.title),r.production_code&&(n.productionCode=r.production_code),n}},{key:"restv1URL",value:function(e){return"/v1/serials/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();u([a.default],l,"forID",null),u([a.default],l,"forTitle",null),u([a.default],l,"all",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Actor=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(3),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},c=r.Actor=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"restv1URL",value:function(e){return"/v1/actors/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.name&&(n.name=r.name),n}},{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM actors WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM actors ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()}):[])})})}},{key:"forName",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM actors WHERE name = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"doctors",value:function(e,r){return new Promise(function(n,t){e.all("SELECT doctors.* FROM doctors WHERE doctors.primary_actor = ? ORDER BY doctors.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return s.Doctor.fromRow(e).addHATEAOS()},r):[])})})}}]),e}();l([u.default],c,"forID",null),l([u.default],c,"all",null),l([u.default],c,"forName",null),l([u.default],c,"doctors",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Doctor=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1),a=n(2),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},f=r.Doctor=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM doctors WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forIncarnation",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM doctors WHERE incarnation = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forPrimaryActorID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM doctors WHERE primary_actor = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"actors",value:function(e,r){return new Promise(function(n,t){e.all("SELECT actors.* FROM actors INNER JOIN doctors ON actors.id = doctors.primary_actor WHERE doctors.id = ? ORDER BY actors.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return a.Actor.fromRow(e).addHATEAOS()},r):[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM doctors ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()},o):[])})})}},{key:"forSerialID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT doctors.* FROM serials INNER JOIN serials_doctors ON serials.id = serials_doctors.serial_id INNER JOIN doctors ON serials_doctors.doctor_id = doctors.id WHERE serials.id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"serials",value:function(e,r){return new Promise(function(n,t){e.all("SELECT serials.* FROM serials INNER JOIN serials_doctors ON serials.id = serials_doctors.serial_id INNER JOIN doctors ON serials_doctors.doctor_id = doctors.id WHERE doctors.id = ? ORDER BY serials.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return s.Serial.fromRow(e).addHATEAOS()},r):[])})})}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.incarnation&&(n.incarnation=r.incarnation),r.primary_actor&&(n.primaryActorID=r.primary_actor),n}},{key:"restv1URL",value:function(e){return"/v1/doctors/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();c([l.default],f,"forID",null),c([l.default],f,"forIncarnation",null),c([l.default],f,"forPrimaryActorID",null),c([l.default],f,"actors",null),c([l.default],f,"all",null),c([l.default],f,"forSerialID",null),c([l.default],f,"serials",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Director=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},c=r.Director=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM directors WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM directors ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()}):[])})})}},{key:"forName",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM directors WHERE name = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forSerialID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT directors.* FROM serials INNER JOIN serials_directors ON serials.id = serials_directors.serial_id INNER JOIN directors ON serials_directors.director_id = directors.id WHERE serials.id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"serials",value:function(e,r){return new Promise(function(n,t){e.all("SELECT serials.* FROM serials INNER JOIN serials_directors ON serials.id = serials_directors.serial_id INNER JOIN directors ON serials_directors.director_id = directors.id WHERE directors.id = ? ORDER BY serials.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return s.Serial.fromRow(e).addHATEAOS()},r):[])})})}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.name&&(n.name=r.name),n}},{key:"restv1URL",value:function(e){return"/v1/directors/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();l([u.default],c,"forID",null),l([u.default],c,"all",null),l([u.default],c,"forName",null),l([u.default],c,"forSerialID",null),l([u.default],c,"serials",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Episode=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},l=r.Episode=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM episodes WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM episodes ORDER BY serial_id, episode_order",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()},o):[])})})}},{key:"forSerialID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT episodes.* FROM episodes WHERE episodes.serial_id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"forTitle",value:function(r,n){return new Promise(function(t,o){r.all("SELECT episodes.* FROM episodes WHERE episodes.title = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"forOriginalAirDate",value:function(r,n){return new Promise(function(t,o){r.all("SELECT episodes.* FROM episodes WHERE episodes.original_air_date = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"forMissingStatus",value:function(r,n){return new Promise(function(t,o){r.all("SELECT episodes.* FROM episodes WHERE episodes.missing = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"restv1URL",value:function(e){return"/v1/episodes/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();l.fromRow=function(e){var r=new l;return e.id&&(r.id=e.id),e.title&&(r.title=e.title),e.serial_id&&(r.serialID=e.serial_id),e.episode_order&&(r.episodeOrder=e.episode_order),e.original_air_date&&(r.originalAirDate=e.original_air_date),e.runtime&&(r.runtime=e.runtime),e.uk_viewers_mm&&(r.ukViewersMM=e.uk_viewers_mm),e.appreciation_index&&(r.appreciationIndex=e.appreciation_index),e.missing&&(r.missing=1===e.missing),e.recreated&&(r.recreated=1===e.recreated),r},u([a.default],l,"forID",null),u([a.default],l,"all",null),u([a.default],l,"forSerialID",null),u([a.default],l,"forTitle",null),u([a.default],l,"forOriginalAirDate",null),u([a.default],l,"forMissingStatus",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Season=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},c=r.Season=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM seasons WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forName",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM seasons WHERE name = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"serials",value:function(e,r){return new Promise(function(n,t){e.all("SELECT serials.* FROM serials WHERE serials.season_id = ? ORDER BY serials.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return s.Serial.fromRow(e).addHATEAOS()},r):[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM seasons ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()}):[])})})}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.name&&(n.name=r.name),n}},{key:"restv1URL",value:function(e){return"/v1/seasons/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();l([u.default],c,"forID",null),l([u.default],c,"forName",null),l([u.default],c,"serials",null),l([u.default],c,"all",null)},function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.Writer=void 0;var o=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(1),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e,r,n,t){var o,s=arguments.length,a=s<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,n):t;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,r,n,t);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(s<3?o(a):s>3?o(r,n,a):o(r,n))||a);return s>3&&a&&Object.defineProperty(r,n,a),a},c=r.Writer=function(){function e(){t(this,e)}return o(e,[{key:"addHATEAOS",value:function(){return e.addHATEAOSTo(this)}}],[{key:"forID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM writers WHERE id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"all",value:function(r){return new Promise(function(n,t){r.all("SELECT * FROM writers ORDER BY id",[],function(r,o,i){r?t({error:{message:"Error while performing Query."}}):n(o&&o.length?o.map(function(r){return e.fromRow(r).addHATEAOS()},o):[])})})}},{key:"forName",value:function(r,n){return new Promise(function(t,o){r.all("SELECT * FROM writers WHERE name = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?e.fromRow(n[0]).addHATEAOS():[])})})}},{key:"forSerialID",value:function(r,n){return new Promise(function(t,o){r.all("SELECT writers.* FROM serials INNER JOIN serials_writers ON serials.id = serials_writers.serial_id INNER JOIN writers ON serials_writers.writer_id = writers.id WHERE serials.id = ?",[n],function(r,n,i){r?o({error:{message:"Error while performing Query."}}):t(n&&n.length?n.map(function(r){return e.fromRow(r).addHATEAOS()},n):[])})})}},{key:"serials",value:function(e,r){return new Promise(function(n,t){e.all("SELECT serials.* FROM serials INNER JOIN serials_writers ON serials.id = serials_writers.serial_id INNER JOIN writers ON serials_writers.writer_id = writers.id WHERE writers.id = ? ORDER BY serials.id",[r],function(e,r,o){e?t({error:{message:"Error while performing Query."}}):n(r&&r.length?r.map(function(e){return s.Serial.fromRow(e).addHATEAOS()},r):[])})})}},{key:"fromRow",value:function(r){var n=new e;return r.id&&(n.id=r.id),r.name&&(n.name=r.name),n}},{key:"restv1URL",value:function(e){return"/v1/writers/"+e}},{key:"addHATEAOSTo",value:function(r){return r.links=[],r.links.push({rel:"self",href:e.restv1URL(r.id)}),r}}]),e}();l([u.default],c,"forID",null),l([u.default],c,"all",null),l([u.default],c,"forName",null),l([u.default],c,"forSerialID",null),l([u.default],c,"serials",null)},function(e,r,n){"use strict";function t(e){return e.originalUrl.match(/^\/graphql\??/)?"GET"===e.method?"GraphiQL":"GraphQL":"REST"}function o(e,r){e.use(function(e,n,o){e.timingData={start:Date.now()},n.on("finish",function(){(0,s.default)(r,{https:!0}).pageview(e.originalUrl).event("Request Type",t(e)).timing("API request","Complete request",Date.now()-e.timingData.start).send()}),o()})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var i=n(18),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){e.use(function(e,r,n){if("/favicon.ico"===e.url)return r.status(200),r.type("image/x-icon"),void r.send("");n()})}},function(e,r,n){"use strict";function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return new Promise(function(e,n){Promise.all(r.filter(function(e){return null!==e})).then(function(r){return e(y(r)?r[0]:null)},function(e){return n(e)})})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){var n=new o.GraphQLObjectType({name:"Actor",description:"An actor",fields:function(){return{id:{type:o.GraphQLID,description:"Actor ID"},name:{type:o.GraphQLString,description:"Actor name"},doctors:{type:new o.GraphQLList(i),description:"Doctors this actor has portrayed",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),d.Actor.doctors(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),i=new o.GraphQLObjectType({name:"Doctor",description:"A single incarnation of The Doctor",fields:function(){return{id:{type:o.GraphQLID,description:"Doctor ID"},incarnation:{type:o.GraphQLString,description:"Name of this incarnation of The Doctor"},primaryActor:{type:n,description:"The actor who usually portrayed this incarnation of The Doctor",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),d.Actor.forID(r,e.primaryActorID).then(function(e){return n(e)},function(e){return o(e)})})}},serials:{type:new o.GraphQLList(g),description:"Serials",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),a.Doctor.serials(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),m=new o.GraphQLObjectType({name:"Director",description:"The director of an episode",fields:function(){return{id:{type:o.GraphQLID,description:"Director ID"},name:{type:o.GraphQLString,description:"Director name"},serials:{type:new o.GraphQLList(g),description:"Serials",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),u.Director.serials(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),y=new o.GraphQLObjectType({name:"Writer",description:"The writer of an episode",fields:function(){return{id:{type:o.GraphQLID,description:"Writer ID"},name:{type:o.GraphQLString,description:"Writer name"},serials:{type:new o.GraphQLList(g),description:"Serials",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),l.Writer.serials(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),h=new o.GraphQLObjectType({name:"Episode",description:"An episode of a Serial, or a single episode of the show",fields:function(){return{id:{type:o.GraphQLID,description:"Episode ID"},title:{type:o.GraphQLString,description:"Episode title"},serial:{type:g,description:"Serial this Episode appears in",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),f.Serial.forID(r,e.serialID).then(function(e){return n(e)},function(e){return o(e)})})}},episodeOrder:{type:o.GraphQLInt,description:"Episode order within a serial"},originalAirDate:{type:o.GraphQLString,description:"Original air date (yyyy-mm-dd)"},runtime:{type:o.GraphQLString,description:"Original running time (hh:mm)"},ukViewersMM:{type:o.GraphQLFloat,description:"UK viewers (millions) of the first showing"},appreciationIndex:{type:o.GraphQLInt,description:"Appreciation Index of the first showing"},missing:{type:o.GraphQLBoolean,description:"Whether the episode is currently missing"},recreated:{type:o.GraphQLBoolean,description:"Whether a missing episode has been officially re-created (such as the animated re-creations)"}}}}),E=new o.GraphQLObjectType({name:"Season",description:"A season of the show",fields:function(){return{id:{type:o.GraphQLID,description:"Season ID"},name:{type:o.GraphQLString,description:"Season name"},serials:{type:new o.GraphQLList(g),description:"Serials",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),c.Season.serials(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),g=new o.GraphQLObjectType({name:"Serial",description:"A serial or single episode",fields:function(){return{id:{type:o.GraphQLID,description:"Serial ID"},season:{type:E,description:"Season",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),c.Season.forID(r,e.seasonID).then(function(e){return n(e)},function(e){return o(e)})})}},story:{type:o.GraphQLInt,description:"Story number"},serial:{type:o.GraphQLInt,description:"Serial episode number"},title:{type:o.GraphQLString,description:"Serial title"},productionCode:{type:o.GraphQLString,description:"Serial production code"},doctors:{type:new o.GraphQLList(i),description:"Doctor(s) who appeared in this episode",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),a.Doctor.forSerialID(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}},directors:{type:new o.GraphQLList(m),description:"Directors of this serial",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),u.Director.forSerialID(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}},writers:{type:new o.GraphQLList(y),description:"Writers of this serial",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),l.Writer.forSerialID(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}},episodes:{type:new o.GraphQLList(h),description:"Episodes in this serial",resolve:function(e,n,t){return new Promise(function(n,o){t.incrementResolverCount(),p.Episode.forSerialID(r,e.id).then(function(e){return n(e)},function(e){return o(e)})})}}}}}),v=new o.GraphQLSchema({query:new o.GraphQLObjectType({name:"RootQueryType",fields:{actor:{type:n,args:{id:{description:"Actor ID",type:o.GraphQLID},name:{description:"Name of this actor",type:o.GraphQLString}},resolve:function(e,n){var o=n.id,i=n.name;return t(o?d.Actor.forID(r,o):null,i?d.Actor.forName(r,i):null)}},doctor:{type:i,args:{id:{description:"Doctor ID",type:o.GraphQLID},incarnation:{description:"Name of this incarnation of The Doctor",type:o.GraphQLString},primaryActorID:{description:"The actor who usually portrayed this incarnation of The Doctor",type:o.GraphQLID}},resolve:function(e,n){var o=n.id,i=n.incarnation,s=n.primaryActorID;return t(o?a.Doctor.forID(r,o):null,i?a.Doctor.forIncarnation(r,i):null,s?a.Doctor.forPrimaryActorID(r,s):null)}},director:{type:m,args:{id:{description:"Director ID",type:o.GraphQLID},name:{description:"Director name",type:o.GraphQLString}},resolve:function(e,n){var o=n.id,i=n.name;return t(o?u.Director.forID(r,o):null,i?u.Director.forName(r,i):null)}},writer:{type:y,args:{id:{description:"Writer ID",type:o.GraphQLID},name:{description:"Writer name",type:o.GraphQLString}},resolve:function(e,n){var o=n.id,i=n.name;return t(o?l.Writer.forID(r,o):null,i?l.Writer.forName(r,i):null)}},season:{type:E,args:{id:{description:"Season ID",type:o.GraphQLID},name:{description:"Season name",type:o.GraphQLString}},resolve:function(e,n){var o=n.id,i=n.name;return t(o?c.Season.forID(r,o):null,i?c.Season.forName(r,i):null)}},episode:{type:h,args:{id:{description:"Episode ID",type:o.GraphQLID},title:{description:"Episode Title",type:o.GraphQLString},originalAirDate:{description:"Original air date (yyyy-mm-dd)",type:o.GraphQLString},missing:{description:"If the episode is currently missing",type:o.GraphQLBoolean}},resolve:function(e,n){var o=n.id,i=n.title,s=n.originalAirDate,a=n.missing;return t(o?p.Episode.forID(r,o):null,i?p.Episode.forTitle(r,i):null,s?p.Episode.forOriginalAirDate(r,s):null,a?p.Episode.forMissingStatus(r,a):null)}},serial:{type:g,args:{id:{description:"Serial ID",type:o.GraphQLID},title:{description:"Serial title",type:o.GraphQLString}},resolve:function(e,n){var o=n.id,i=n.title;return t(o?f.Serial.forID(r,o):null,i?f.Serial.forTitle(r,i):null)}}}})});e.use(function(e,r,n){e.resolverCount=0,e.incrementResolverCount=function(){if(++this.resolverCount>2e3)throw"Cost limiting is in effect. Query complexity was too high."},n()}),e.use("/graphql",(0,s.default)({schema:v,graphiql:!0}))};var o=n(17),i=n(16),s=function(e){return e&&e.__esModule?e:{default:e}}(i),a=n(3),u=n(4),l=n(7),c=n(6),f=n(1),d=n(2),p=n(5),m=function(e,r){return void 0!==e.id&&void 0!==r.id&&e.id===r.id},y=function(e){return e.length>0&&e.reduce(function(e,r,n,t){return e&&m(r,t[0])})}},function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,r){function n(e,n){t.Doctor.all(r).then(c(n),f(n))}function d(e,n){t.Doctor.forID(r,e.params.id).then(c(n),f(n))}function p(e,n){t.Doctor.serials(r,e.params.id).then(c(n),f(n))}function m(e,n){t.Doctor.actors(r,e.params.id).then(c(n),f(n))}function y(e,n){o.Serial.all(r).then(c(n),f(n))}function h(e,n){o.Serial.forID(r,e.params.id).then(c(n),f(n))}function E(e,n){t.Doctor.forSerialID(r,e.params.id).then(c(n),f(n))}function g(e,n){s.Director.forSerialID(r,e.params.id).then(c(n),f(n))}function v(e,n){i.Writer.forSerialID(r,e.params.id).then(c(n),f(n))}function w(e,n){l.Episode.forSerialID(r,e.params.id).then(c(n),f(n))}function S(e,n){a.Season.all(r).then(c(n),f(n))}function R(e,n){a.Season.forID(r,e.params.id).then(c(n),f(n))}function O(e,n){a.Season.serials(r,e.params.id).then(c(n),f(n))}function A(e,n){s.Director.all(r).then(c(n),f(n))}function D(e,n){s.Director.forID(r,e.params.id).then(c(n),f(n))}function T(e,n){s.Director.serials(r,e.params.id).then(c(n),f(n))}function b(e,n){i.Writer.all(r).then(c(n),f(n))}function I(e,n){i.Writer.forID(r,e.params.id).then(c(n),f(n))}function L(e,n){i.Writer.serials(r,e.params.id).then(c(n),f(n))}function _(e,n){l.Episode.all(r).then(c(n),f(n))}function Q(e,n){l.Episode.forID(r,e.params.id).then(c(n),f(n))}function P(e,n){u.Actor.all(r).then(c(n),f(n))}function k(e,n){u.Actor.forID(r,e.params.id).then(c(n),f(n))}function H(e,n){u.Actor.doctors(r,e.params.id).then(c(n),f(n))}e.get("/doctors",n),e.get("/v1/doctors",n),e.get("/doctors/:id",d),e.get("/v1/doctors/:id",d),e.get("/doctors/:id/serials",p),e.get("/v1/doctors/:id/serials",p),e.get("/doctors/:id/actors",m),e.get("/v1/doctors/:id/actors",m),e.get("/serials",y),e.get("/v1/serials",y),e.get("/serials/:id",h),e.get("/v1/serials/:id",h),e.get("/serials/:id/doctors",E),e.get("/v1/serials/:id/doctors",E),e.get("/serials/:id/directors",g),e.get("/v1/serials/:id/directors",g),e.get("/serials/:id/writers",v),e.get("/v1/serials/:id/writers",v),e.get("/serials/:id/episodes",w),e.get("/v1/serials/:id/episodes",w),e.get("/seasons",S),e.get("/v1/seasons",S),e.get("/seasons/:id",R),e.get("/v1/seasons/:id",R),e.get("/seasons/:id/serials",O),e.get("/v1/seasons/:id/serials",O),e.get("/directors",A),e.get("/v1/directors",A),e.get("/directors/:id",D),e.get("/v1/directors/:id",D),e.get("/directors/:id/serials",T),e.get("/v1/directors/:id/serials",T),e.get("/writers",b),e.get("/v1/writers",b),e.get("/writers/:id",I),e.get("/v1/writers/:id",I),e.get("/writers/:id/serials",L),e.get("/v1/writers/:id/serials",L),e.get("/episodes",_),e.get("/v1/episodes",_),e.get("/episodes/:id",Q),e.get("/v1/episodes/:id",Q),e.get("/actors",P),e.get("/v1/actors",P),e.get("/actors/:id",k),e.get("/v1/actors/:id",k),e.get("/actors/:id/doctors",H),e.get("/v1/actors/:id/doctors",H)};var t=n(3),o=n(1),i=n(7),s=n(4),a=n(6),u=n(2),l=n(5),c=function(e){return function(r){e.type("json"),e.send(r)}},f=function(e){return function(r){e.status(404).send("Error")}}},function(e,r){e.exports=require("dotenv")},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("sqlite3")},function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var o=n(13),i=t(o),s=n(11),a=t(s),u=n(14),l=n(10),c=t(l),f=n(8),d=t(f),p=n(9),m=t(p);n(12).config();var y=new u.Database("catalogopolis-api.sqlite"),h=(0,i.default)();if(!process.env.CATALOGOPOLIS_API_UA)throw"CATALOGOPOLIS_API_UA environment variable must be set";(0,m.default)(h),(0,d.default)(h,process.env.CATALOGOPOLIS_API_UA),(0,a.default)(h,y),(0,c.default)(h,y),h.listen(process.env.CATALOGOPOLIS_API_PORT||5e3)},function(e,r){e.exports=require("express-graphql")},function(e,r){e.exports=require("graphql")},function(e,r){e.exports=require("universal-analytics")}]);